<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Happiness Calculator</title>

	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet" />
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />

	<!-- Javascript -->
	<script>
	$(function() {

		$( "#slider-salary" ).slider({
			value: 50000,
			// range: true,
			min: 1000,
			max: 500000,
			// values: [ 50000, 70000 ],
			slide: function( event, ui ) {
				$( "#user-salary" ).val( "$" + ui.value );
				// $( "#user-salary" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
				updateTotal();
			}
		});

		$( "#slider-tax" ).slider({
			value: 25,
			min: 10,
			max: 40,
			slide: function( event, ui ) {
				$( "#user-tax" ).val( "$" + ui.values );
				updateTotal();
			}
		});

		$( "#slider-expense" ).slider({
			range: true,
			min: 0,
			max: 5000,
			values: [ 750, 1250 ],
			slide: function( event, ui ) {
				$( "#user-expense" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
				updateTotal();
			}
		});

		$( "#user-salary" ).val( "$" + $( "#slider-salary" ).slider( "value" ) );
		$( "#user-expense" ).val( "$" + $( "#slider-expense" ).slider( "values", 0 )
		+ " - $" + $( "#slider-expense" ).slider( "values", 1 ) );



		function updateTotal() {
			$salary = $("#slider-salary").slider("value");

			//assign tax bracket
			if ($salary <= 9225) { $taxBracket = 10; }
			else if ($salary >= 9226 && $salary <= 37450 ) { $taxBracket = 15; }
			else if ($salary >= 37451 && $salary <= 90750) { $taxBracket = 25; }
			else if ($salary >= 90751 && $salary <= 189300) { $taxBracket = 28; }
			else if ($salary >= 189301 && $salary <= 411500) { $taxBracket = 33; }
			else if ($salary >= 411501 && $salary <= 413200) { $taxBracket = 35; }
			else if ($salary >= 413201) { $taxBracket = 39.6; }

			//factor in tax
			$salary = $salary - (($taxBracket / 100) * $salary) ;

			$minExpense = $("#slider-expense").slider("values", 0);
			$maxExpense = $("#slider-expense").slider("values", 1);

			//convert to biweekly
			$minBiWeekly = $salary / 26;
			$maxBiWeekly = $salary / 26;

			$minTotal = Math.round(($minBiWeekly * 2) - $minExpense);
			$maxTotal = Math.round(($maxBiWeekly * 2) - $maxExpense);

			$("#user-tax").val($taxBracket + "%");
			$("#total").val("$" + $maxTotal + " to $" + $minTotal);
		}
	});
	</script>
	<style>
	.row {
	    height: 60px;
	}
	</style>
</head>
<body>
	<!-- HTML -->
	<section>
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h3>Happiness Calculator</h3>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div>
						<label for="slider-salary">Salary:</label>
						<input type="text" id="user-salary"
						style="border:0; color:#b9cd6d; font-weight:bold;">
					</div>
					<div id="slider-salary"></div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div>
						<label for="slider-expense">Monthly expense range:</label>
						<input type="text" id="user-expense"
						style="border:0; color:#b9cd6d; font-weight:bold;">
					</div>
					<div id="slider-expense"></div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div>
						<label for="user-tax">Tax:</label>
						<input type="text" id="user-tax"
						style="border:0; color:#b9cd6d; font-weight:bold;">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div>
						<label for="total">Disposable Cash (per month):</label>
						<h2><input type="text" id="total"
						style="border:0; color:#b9cd6d; font-weight:bold;"></h2>
					</div>
				</div>
			</div>
		</container>
	</section>
</body>
</html>
